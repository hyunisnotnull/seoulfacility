<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
                   
<mapper namespace="com.office.seoul.facility.reservation.IReservationDao">

	<!-- 예약된 시간 조회 -->
    <select id="findReservedTimes" parameterType="Map" resultType="String">
        SELECT R_USE_TIME
        FROM TBL_RESERVE_INFO
        WHERE SVCID = #{facilityId}
        AND R_RESERVE_DATE = #{selectedDate}
        AND R_USE_STATE IN ('예약', '예약대기')
    </select>
    
    <!-- 예약 확인  -->
    <insert id="insertReservation" parameterType="Map">
        INSERT INTO TBL_RESERVE_INFO (SVCID, U_M_ID, R_RESERVE_DATE, R_USE_STATE, R_USE_TIME)
        VALUES (#{facilityId}, #{userId}, #{selectedDate}, '예약대기', #{selectedTime});
    </insert>

</mapper>